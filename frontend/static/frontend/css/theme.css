/* ===================================================================
   Emergency Services Locator - Theme System
   Complete theming with light/dark mode support and WCAG AAA compliance
   =================================================================== */

/* ===================================================================
   CSS Custom Properties - Light Mode (Default)
   =================================================================== */

:root {
  /* =============== Colors - Trust Palette (Primary) =============== */
  --color-primary: #0077B6;           /* Ocean Blue - buttons, links, focus */
  --color-primary-light: #00B4D8;     /* Bright Teal - hover states */
  --color-primary-dark: #023E8A;      /* Deep Navy - active/pressed states */
  --color-primary-subtle: #CAF0F8;    /* Pale Cyan - backgrounds, highlights */

  /* =============== Colors - Emergency Accents =============== */
  --color-emergency: #D62828;         /* Emergency Red - critical actions */
  --color-emergency-light: #F77F00;   /* Alert Orange - user pin, warnings */
  --color-emergency-subtle: #FCBF49;  /* Warm Amber - info states */

  /* =============== Colors - Neutral Foundation =============== */
  --color-background: #FFFFFF;        /* Pure White - page background */
  --color-surface: #F8F9FA;           /* Light Gray - surface backgrounds */
  --color-surface-elevated: #FFFFFF;  /* White - elevated cards with shadow */
  --color-border: #DEE2E6;            /* Light Border */
  --color-border-subtle: #E9ECEF;     /* Subtle Border */

  /* =============== Colors - Text =============== */
  --color-text-primary: #212529;      /* Almost Black - body text */
  --color-text-secondary: #495057;    /* Dark Gray - secondary text */
  --color-text-tertiary: #6C757D;     /* Medium Gray - muted text */
  --color-text-inverse: #FFFFFF;      /* White on dark backgrounds */

  /* =============== Colors - Map Neutral (Theme-Independent) =============== */
  --map-county-border: #8E9AAF;       /* Neutral Gray-Blue - county boundaries */
  --map-county-fill: #E8ECF1;         /* Very Light Gray-Blue - county fill */
  --map-county-hover: #C1C8D4;        /* Medium Gray-Blue - hover state */
  --map-county-active: #A5B2C4;       /* Darker Gray-Blue - active/selected */
  --map-tooltip-bg: rgba(52, 58, 64, 0.95);  /* Dark neutral - tooltip background */
  --map-tooltip-text: #FFFFFF;        /* White - tooltip text */

  /* =============== Typography =============== */
  --font-family-base: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-family-display: "Segoe UI", system-ui, sans-serif;

  --font-size-xs: 0.75rem;      /* 12px - very small labels */
  --font-size-sm: 0.875rem;     /* 14px - small text, help text */
  --font-size-base: 1rem;       /* 16px - body text */
  --font-size-lg: 1.125rem;     /* 18px - large body */
  --font-size-xl: 1.25rem;      /* 20px - subheadings */
  --font-size-2xl: 1.5rem;      /* 24px - headings */

  --font-weight-normal: 400;    /* Body text */
  --font-weight-medium: 500;    /* Emphasis */
  --font-weight-semibold: 600;  /* Headings, labels */
  --font-weight-bold: 700;      /* Strong emphasis */

  --line-height-tight: 1.25;    /* Headings */
  --line-height-base: 1.5;      /* Body text */
  --line-height-relaxed: 1.75;  /* Comfortable reading */

  /* =============== Spacing =============== */
  --spacing-xs: 0.25rem;   /* 4px */
  --spacing-sm: 0.5rem;    /* 8px */
  --spacing-md: 1rem;      /* 16px */
  --spacing-lg: 1.5rem;    /* 24px */
  --spacing-xl: 2rem;      /* 32px */
  --spacing-2xl: 3rem;     /* 48px */

  /* =============== Shadows =============== */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);

  /* =============== Border Radius =============== */
  --radius-sm: 0.25rem;   /* 4px */
  --radius-md: 0.375rem;  /* 6px */
  --radius-lg: 0.5rem;    /* 8px */

  /* =============== Focus Ring =============== */
  --focus-ring-width: 3px;
  --focus-ring-color: var(--color-primary);
  --focus-ring-offset: 2px;

  /* =============== Transitions =============== */
  --transition-fast: 150ms ease-in-out;
  --transition-base: 250ms ease-in-out;
  --transition-slow: 350ms ease-in-out;
}

/* ===================================================================
   Dark Mode Disabled - Light Mode Only
   =================================================================== */

/* Dark mode is disabled to ensure consistent emergency color palette */

/* ===================================================================
   Base Styles
   =================================================================== */

body {
  background-color: var(--color-background);
  color: var(--color-text-primary);
  font-family: var(--font-family-base);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-normal);
  line-height: var(--line-height-base);
}

/* ===================================================================
   Typography
   =================================================================== */

h1, h2, h3, h4, h5, h6,
.h1, .h2, .h3, .h4, .h5, .h6 {
  font-family: var(--font-family-display);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  color: var(--color-text-primary) !important;
  margin-bottom: var(--spacing-md);
}

.h4 {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-semibold);
}

small {
  font-size: var(--font-size-sm);
  line-height: var(--line-height-base);
  color: var(--color-text-primary);
}

strong {
  color: var(--color-text-primary);
}

.fw-semibold {
  font-weight: var(--font-weight-semibold) !important;
}

/* ===================================================================
   Bootstrap Component Overrides - Buttons
   =================================================================== */

.btn {
  font-weight: var(--font-weight-medium);
  border-radius: var(--radius-md);
  transition: all var(--transition-fast);
  padding: var(--spacing-sm) var(--spacing-lg);
}

.btn-primary {
  background-color: var(--color-primary);
  border-color: var(--color-primary);
  color: var(--color-text-inverse);
}

.btn-primary:hover {
  background-color: var(--color-primary-dark);
  border-color: var(--color-primary-dark);
  color: var(--color-text-inverse);
}

.btn-primary:active,
.btn-primary.active {
  background-color: var(--color-primary-dark);
  border-color: var(--color-primary-dark);
  color: var(--color-text-inverse);
}

.btn-primary:focus-visible {
  background-color: var(--color-primary);
  border-color: var(--color-primary);
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
  box-shadow: 0 0 0 var(--focus-ring-width) rgba(0, 119, 182, 0.25);
}

.btn-outline-primary {
  color: var(--color-primary);
  border-color: var(--color-primary);
  background-color: transparent;
}

.btn-outline-primary:hover {
  background-color: var(--color-primary);
  border-color: var(--color-primary);
  color: var(--color-text-inverse);
}

.btn-outline-primary:active,
.btn-outline-primary.active {
  background-color: var(--color-primary-dark);
  border-color: var(--color-primary-dark);
  color: var(--color-text-inverse);
}

.btn-outline-primary:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
  box-shadow: 0 0 0 var(--focus-ring-width) rgba(0, 119, 182, 0.25);
}

.btn-secondary {
  background-color: var(--color-text-tertiary);
  border-color: var(--color-text-tertiary);
  color: var(--color-text-inverse);
}

.btn-secondary:hover {
  background-color: var(--color-text-secondary);
  border-color: var(--color-text-secondary);
  color: var(--color-text-inverse);
}

.btn-secondary:active,
.btn-secondary.active {
  background-color: var(--color-text-secondary);
  border-color: var(--color-text-secondary);
  color: var(--color-text-inverse);
}

.btn-outline-secondary {
  color: var(--color-text-tertiary);
  border-color: var(--color-border);
  background-color: transparent;
}

.btn-outline-secondary:hover {
  background-color: var(--color-surface);
  border-color: var(--color-text-tertiary);
  color: var(--color-text-primary);
}

.btn-outline-secondary:active,
.btn-outline-secondary.active {
  background-color: var(--color-text-tertiary);
  border-color: var(--color-text-tertiary);
  color: var(--color-text-inverse);
}

.btn:active {
  transform: translateY(1px);
}

/* ===================================================================
   Bootstrap Component Overrides - Forms
   =================================================================== */

.form-control,
.form-select {
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  color: var(--color-text-primary);
  font-size: var(--font-size-base);
  padding: var(--spacing-sm) var(--spacing-md);
  transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
}

.form-control:focus,
.form-select:focus {
  border-color: var(--color-primary);
  background-color: var(--color-surface-elevated);
  box-shadow: 0 0 0 var(--focus-ring-width) rgba(0, 119, 182, 0.15);
  outline: none;
  color: var(--color-text-primary);
}

.form-control::placeholder {
  color: var(--color-text-tertiary);
}

.form-label {
  color: var(--color-text-primary) !important;
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
  margin-bottom: var(--spacing-xs);
}

.form-text {
  color: var(--color-text-tertiary) !important;
  font-size: var(--font-size-sm);
}

/* Fix output element for radius display */
output {
  color: var(--color-text-primary);
}

.form-range {
  background-color: transparent;
}

.form-range::-webkit-slider-thumb {
  background-color: var(--color-primary);
  border: 2px solid var(--color-surface-elevated);
}

.form-range::-moz-range-thumb {
  background-color: var(--color-primary);
  border: 2px solid var(--color-surface-elevated);
}

.form-range:focus::-webkit-slider-thumb {
  box-shadow: 0 0 0 var(--focus-ring-width) rgba(0, 119, 182, 0.25);
}

.form-range:focus::-moz-range-thumb {
  box-shadow: 0 0 0 var(--focus-ring-width) rgba(0, 119, 182, 0.25);
}

/* ===================================================================
   Bootstrap Component Overrides - Cards
   =================================================================== */

.card {
  background-color: var(--color-surface-elevated);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
}

.card-body {
  padding: var(--spacing-lg);
}

/* ===================================================================
   Bootstrap Component Overrides - Alerts
   =================================================================== */

.alert {
  border-radius: var(--radius-md);
  border-width: 1px;
  font-size: var(--font-size-sm);
}

.alert-info {
  background-color: var(--color-primary-subtle);
  border-color: var(--color-primary-light);
  color: var(--color-primary-dark);
}

/* ===================================================================
   Bootstrap Component Overrides - Text Utilities
   =================================================================== */

.text-muted {
  color: var(--color-text-tertiary) !important;
}

.text-primary {
  color: var(--color-primary) !important;
}

.bg-light {
  background-color: var(--color-surface) !important;
}

/* ===================================================================
   Spacing Utilities
   =================================================================== */

.vstack {
  gap: var(--spacing-md) !important;
}

/* ===================================================================
   Accessibility Enhancements - Focus States
   =================================================================== */

*:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
}

.btn:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
}

.form-control:focus-visible,
.form-select:focus-visible {
  border-color: var(--color-primary);
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: 1px;
  box-shadow: 0 0 0 var(--focus-ring-width) rgba(0, 119, 182, 0.15);
}

.form-range:focus-visible {
  outline: none;
}

.form-range:focus-visible::-webkit-slider-thumb {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
  box-shadow: 0 0 0 var(--focus-ring-width) rgba(0, 119, 182, 0.25);
}

.form-range:focus-visible::-moz-range-thumb {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
  box-shadow: 0 0 0 var(--focus-ring-width) rgba(0, 119, 182, 0.25);
}

a:focus-visible {
  outline: var(--focus-ring-width) solid var(--color-primary);
  outline-offset: var(--focus-ring-offset);
  border-radius: var(--radius-sm);
}

/* ===================================================================
   Accessibility Enhancements - Skip Links
   =================================================================== */

.visually-hidden-focusable:focus {
  position: static;
  clip: auto;
  clip-path: none;
  width: auto;
  height: auto;
  overflow: visible;
  white-space: normal;
  background-color: var(--color-primary);
  color: var(--color-text-inverse);
  padding: var(--spacing-md);
  border-radius: var(--radius-md);
  font-weight: var(--font-weight-semibold);
  z-index: 10000;
}

/* ===================================================================
   Accessibility - Reduced Motion Support
   =================================================================== */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  /* Keep focus transitions for clarity */
  *:focus-visible {
    transition-duration: 0ms !important;
  }
}

/* ===================================================================
   Accessibility - High Contrast Mode Support
   =================================================================== */

@media (prefers-contrast: more) {
  :root {
    --focus-ring-width: 4px;
    --color-border: #000000;
  }

  .btn {
    border-width: 2px;
  }

  .card {
    border-width: 2px;
  }

  .form-control,
  .form-select {
    border-width: 2px;
  }
}

/* ===================================================================
   Print Styles - Force Light Mode
   =================================================================== */

@media print {
  :root {
    --color-background: #FFFFFF;
    --color-surface: #FFFFFF;
    --color-surface-elevated: #FFFFFF;
    --color-text-primary: #000000;
    --color-text-secondary: #333333;
    --color-text-tertiary: #666666;
    --color-border: #000000;
  }

  .card {
    box-shadow: none;
    border: 1px solid #000;
  }

  .shadow-sm,
  .shadow-md,
  .shadow-lg {
    box-shadow: none !important;
  }
}

/* ===================================================================
   Status Message Styling
   =================================================================== */

#statusMsg {
  font-size: var(--font-size-sm);
  color: var(--color-text-tertiary) !important;
  font-style: italic;
  padding: var(--spacing-sm);
  background-color: var(--color-surface);
  border-radius: var(--radius-sm);
  border-left: 3px solid var(--color-primary);
}

#statusMsg[data-status="error"] {
  color: var(--color-emergency) !important;
  border-left-color: var(--color-emergency);
}

#statusMsg[data-status="success"] {
  color: var(--color-primary) !important;
  border-left-color: var(--color-primary);
}

/* ===================================================================
   Additional Text Element Fixes for Dark Mode
   =================================================================== */

/* Ensure all text elements inherit proper colors */
p, span, div, li, ul, ol, a, label {
  color: inherit;
}

/* Fix for any remaining Bootstrap text */
.card-body * {
  color: inherit;
}

/* Explicitly override Bootstrap's default heading colors */
.card .h4,
.card h4 {
  color: var(--color-text-primary) !important;
}
